webpackJsonp([53],{GHCQ:function(t,e){},LMF3:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("mC1u"),i={name:"foodManage",data:function(){return{showGroup:!1,activeName:null,catLists:[],foodLists:[],editGroupInfo:{cat_id:null,name:"",order_num:50}}},created:function(){var t=this;Object(a.h)().then(function(e){t.catLists=e.data.data,t.activeName=e.data.data[0].cat_id.toString(),t.fetchFood()})},methods:{fetchFood:function(){var t=this;Object(a.m)(this.activeName).then(function(e){t.foodLists=e.data.data})},createFood:function(){this.$router.push({name:"addFood",params:{active:this.activeName}})},editFood:function(t){var e=this,o=t.food_id;Object(a.l)(o).then(function(t){e.$router.push({name:"editFood",params:{pFood:t.data.data}})})},forSale:function(t,e){var o=this,i={food_id:t.food_id,sale:e};Object(a.j)(i).then(function(t){o.fetchFood()})},delFood:function(t){var e={food_id:t},o=this;o.$confirm("将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.e)(e).then(function(t){0==t.data.code?(o.$message({type:"success",message:"删除成功!"}),o.fetchFood()):o.$message({type:"info",message:"删除失败!"})})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},editInfo:function(){this.showGroup=!0,this.editGroupInfo.name=row.name,this.editGroupInfo.cat_id=row.cat_id},editFoodGroup:function(){}}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"ui-bg food-manage-title clearfix"},[o("div",{staticClass:"pull-left"},[o("el-button",{attrs:{type:"primary"},on:{click:t.createFood}},[t._v("新建商品")]),t._v(" "),o("el-button",[t._v("上架")]),t._v(" "),o("el-button",[t._v("下架")])],1),t._v(" "),o("div",{staticClass:"pull-right"},[o("el-input",{attrs:{placeholder:"搜索商品"}})],1)]),t._v(" "),o("div",{staticClass:"manage"},[o("el-tabs",{staticStyle:{height:"420px"},attrs:{"tab-position":"left",type:"border-card"},on:{"tab-click":t.fetchFood},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.catLists,function(e,a){return o("el-tab-pane",{key:a,attrs:{label:e.name,name:e.cat_id+""}},[o("div",{},[o("el-table",{ref:"foodTable",refInFor:!0,staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",data:t.foodLists}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),o("el-table-column",{attrs:{label:"缩略图",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"goods-img"},[o("img",{attrs:{src:e.row.image[0]}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_on_sale,expression:"scope.row.is_on_sale == 0"}],staticClass:"off-sale"},[t._v("\n\t\t\t\t\t    \t\t\t\t已下架\n\t\t\t\t\t    \t\t\t")])])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"名称",width:"120"}}),t._v(" "),o("el-table-column",{attrs:{prop:"price",label:"价格",width:"120"}}),t._v(" "),o("el-table-column",{attrs:{prop:"address",label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.row.is_on_sale,expression:"scope.row.is_on_sale == 1"}],attrs:{size:"mini"},on:{click:function(o){t.forSale(e.row,0)}}},[t._v("\n\t\t\t\t\t      \t\t\t下架\n\t\t\t\t\t      \t\t")]),t._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.row.is_on_sale,expression:"scope.row.is_on_sale == 0"}],attrs:{size:"mini",type:"primary"},on:{click:function(o){t.forSale(e.row,1)}}},[t._v("\n\t\t\t\t\t      \t\t\t上架\n\t\t\t\t\t      \t\t")]),t._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:function(o){t.editFood(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){t.delFood(e.row.food_id)}}},[t._v("\n\t\t\t\t\t\t       \t\t删除\n\t\t\t\t\t\t       \t")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){t.editInfo(e.row)}}},[t._v("\n\t\t\t\t\t\t      \t\t改分组\n\t\t\t\t\t\t      \t")])]}}])})],1)],1)])}))],1),t._v(" "),o("el-dialog",{attrs:{title:"修改商品分组",visible:t.showGroup,width:"30%"},on:{"update:visible":function(e){t.showGroup=e}}},[t._l(t.catLists,function(e,a){return o("div",{key:a,staticClass:"chooseList"},[o("el-radio",{attrs:{label:e.cat_id,border:""}},[t._v("\n\t    \t"+t._s(e.name)+"\n\t    ")])],1)}),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.showGroup=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.editFoodGroup}},[t._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var s=o("C7Lr")(i,n,!1,function(t){o("GHCQ")},"data-v-16b54342",null);e.default=s.exports}});
//# sourceMappingURL=53.5c403f782002f2b12c4d.js.map