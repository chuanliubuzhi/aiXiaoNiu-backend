webpackJsonp([28],{XYyI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mC1u"),o=a("TIfe"),n=(a("yh13"),{name:"tables",data:function(){return{dialogVisible:!1,lists:[],form:{name:"",chair:"",table_id:""}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;Object(i.n)().then(function(e){t.lists=e.data.data})},create:function(){this.form.name="",this.form.chair="",this.form.table_id="",this.dialogVisible=!0},handleCreate:function(){var t=this;if(""==this.form.name)return this.$message.error("请输入桌位编号"),this.form.name;Object(i.c)(this.form).then(function(e){0==e.data.code?(t.$message.success(e.data.message),t.dialogVisible=!1,t.fetchData()):t.$message.error(e.data.message)})},handleDownload:function(t,e){var a=Object(o.c)(),i=this.$refs.download,n="http://api.xn.demo-xn.itdongli.com/restaurant/tables/createqr?access_token="+a+"&tables="+e.id;i.setAttribute("download",e.id),i.setAttribute("href",n),console.log(i)},edit:function(t){this.form.name=t.name,this.form.chair=t.chair,this.form.table_id=t.table_id,this.dialogVisible=!0},handleEdit:function(t,e){var a=this;""!=this.form.name?Object(i.o)(this.form).then(function(t){0==t.data.code?(a.dialogVisible=!1,a.$message.success(t.data.message),a.fetchData()):a.$message.error(t.data.message)}):this.$message.error("请输入桌位编号")},handleDelete:function(t,e){var a=this;this.$confirm("此操作将永久删除该桌子, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.f)(e.table_id).then(function(t){0==t.data.code?(a.$message.success(t.data.message),a.fetchData()):a.$message.error(t.data.message)})}).catch(function(){a.$message.info("已取消删除")})}}}),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"table",staticClass:"container"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.create}},[t._v("新建桌位")]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.lists,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"桌位编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"chair",label:"座位数"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{ref:"download",staticClass:"button",attrs:{id:"a",size:"mini",href:"#",download:""},on:{click:function(a){t.handleDownload(e.$index,e.row)}}},[t._v("下载点餐码")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.edit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"桌位编号：","label-width":"100px"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off",pleaseholder:"如001、A1",rules:{required:!0,message:"请输入桌位编号",trigger:"blur"}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"座位数：","label-width":"100px"}},[a("el-input-number",{attrs:{min:1,max:100},model:{value:t.form.chair,callback:function(e){t.$set(t.form,"chair",e)},expression:"form.chair"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),""==t.form.table_id?a("el-button",{attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("确 定")]):t._e(),t._v(" "),""!=t.form.table_id?a("el-button",{attrs:{type:"primary"},on:{click:t.handleEdit}},[t._v("确 定")]):t._e()],1)],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(n,s,!1,function(t){a("oLtD")},"data-v-6b6c01aa",null);e.default=l.exports},oLtD:function(t,e){}});
//# sourceMappingURL=28.14876ee44ec2b5b82c42.js.map