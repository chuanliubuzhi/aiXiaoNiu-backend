webpackJsonp([36],{"6iF2":function(e,t){},"6lbP":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("qsHl"),a=s("TIfe"),l={name:"goodsEdit",data:function(){return{hideUploadImg:!1,radio:"1",radio1:"1",activeStep:1,fnum:999,snum:999,tnum:999,lists:[],slists:[],tlists:[],fileList2:[],fname:"",sname:"",tname:"",ruleForm:{catid:null,goodsName:"",goodsImg:"",goodsDetail:"",market:null,localShop:null,stock:null,goodsCode:null,goodsId:null},rules:{goodsName:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:1,max:10,message:"长度在 1到 10 个字符",trigger:"blur"}],goodsImg:[{required:!0,message:"请选择商品图片",trigger:"blur"}],goodsDetail:[{required:!0,message:"请描述商品详情",trigger:"blur"}],market:[{required:!0,message:"请输入市场价",trigger:"blur"},{type:"number",message:"价格只能是数字",trigger:"blur"}],localShop:[{required:!0,message:"请输入本店价",trigger:"blur"},{type:"number",message:"价格只能是数字",trigger:"blur"}],stock:[{required:!0,message:"请输入库存",trigger:"blur"},{type:"number",message:"库存只能是数字",trigger:"blur"}],goodsCode:[{required:!0,message:"请输入商品编码",trigger:"blur"}]},upLoadData:{access_token:"",catid:null},options:[{value:"选项1",label:"黄金糕"}],value:""}},created:function(){this.fetchData(),this.getParams()},methods:{fetchData:function(){},Edit:function(){var e=this,t={cat_id:this.ruleForm.catid,goods_name:this.ruleForm.goodsName,goods_sn:this.ruleForm.goodsCode,goods_content:this.ruleForm.goodsDetail,original_img:this.ruleForm.goodsImg,market_price:this.ruleForm.market,shop_price:this.ruleForm.localShop,store_count:this.ruleForm.stock,goods_id:this.ruleForm.goodsId};Object(o.e)(t).then(function(t){0==t.data.code?(e.$message({type:"success",message:"编辑成功!"}),e.$router.push("/goods")):e.$message({type:"info",message:"编辑失败!"})})},showUploadImg:function(){this.hideUploadImg=!0},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},uploadSuccess:function(e,t,s){this.ruleForm.goodsImg=e.data.filepath},getParams:function(){this.ruleForm.catid=this.$route.params.catid,this.ruleForm.goodsName=this.$route.params.goodsName,this.ruleForm.goodsCode=this.$route.params.goodsSn,this.ruleForm.goodsDetail=this.$route.params.goodsContent,this.ruleForm.goodsImg=this.$route.params.originalImg,this.ruleForm.market=this.$route.params.marketPrice,this.ruleForm.localShop=this.$route.params.shopPrice,this.ruleForm.goodsId=this.$route.params.goodsId,this.ruleForm.stock=this.$route.params.storeCount,this.upLoadData.catid=this.$route.params.catid,this.upLoadData.access_token=Object(a.c)()}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container newcon"},[s("div",{staticClass:"ui-box"},[s("el-steps",{attrs:{active:e.activeStep,simple:""}},[s("el-step",{attrs:{title:"选择商品种类",icon:"el-icon-edit"}}),e._v(" "),s("el-step",{attrs:{title:"编辑商品信息",icon:"el-icon-upload"}})],1)],1),e._v(" "),0==e.activeStep?s("div",{staticClass:"ui-box"},[s("ul",{staticClass:"cate-list clearfix ui-box"},[s("li",{staticClass:"cate-list-li"},[s("ul",{staticClass:"cate-tree calSor"},e._l(e.lists,function(t,o){return s("li",{key:o,on:{click:function(s){e.showSecond(t.catid,t.mobile_name,o)}}},[s("a",{staticClass:"child",class:{cative:o==e.fnum}},[e._v(e._s(t.mobile_name)),s("i",{staticClass:"el-icon-arrow-right"})])])}))]),e._v(" "),s("li",{staticClass:"cate-list-li"},[s("ul",{staticClass:"cate-tree calSor"},e._l(e.slists,function(t,o){return s("li",{key:o,on:{click:function(s){e.showThird(t.catid,t.mobile_name,o)}}},[s("a",{staticClass:"child",class:{cative:o==e.snum}},[e._v(e._s(t.mobile_name)),s("i",{staticClass:"el-icon-arrow-right"})])])}))]),e._v(" "),s("li",{staticClass:"cate-list-li"},[s("ul",{staticClass:"cate-tree calSor"},e._l(e.tlists,function(t,o){return s("li",{key:o,on:{click:function(s){e.showTname(t.catid,t.mobile_name,o)}}},[s("a",{staticClass:"child",class:{cative:o==e.tnum}},[e._v(e._s(t.mobile_name))])])}))])]),e._v(" "),s("div",{staticClass:"ui-box"},[s("span",[e._v("您当前选择的是：")]),e._v(" "),""!==e.fname?s("span",{staticClass:"curChoose"},[e._v(e._s(e.fname)),s("i",{staticClass:"el-icon-arrow-right"})]):e._e(),e._v(" "),""!==e.sname?s("span",{staticClass:"curChoose"},[e._v(e._s(e.sname)),s("i",{staticClass:"el-icon-arrow-right"})]):e._e(),e._v(" "),""!==e.tname?s("span",{staticClass:"curChoose"},[e._v(e._s(e.tname))]):e._e()]),e._v(" "),s("div",{staticClass:"ui-box tobasic"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){}}},[e._v("下一步")])],1)]):e._e(),e._v(" "),1==e.activeStep?s("div",{staticClass:"eidtorInfo"},[s("el-form",{attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px","label-position":"left"}},[s("div",{staticClass:"ui-box"},[s("p",{staticClass:"create-main"},[e._v("基本信息")]),e._v(" "),s("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[s("el-col",{attrs:{span:11}},[s("el-input",{model:{value:e.ruleForm.goodsName,callback:function(t){e.$set(e.ruleForm,"goodsName",t)},expression:"ruleForm.goodsName"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"商品主图",prop:"goodsImg"}},[s("el-col",{attrs:{span:11}},[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showUploadImg}},[e._v("上传图片")])],1)],1),e._v(" "),""!==e.ruleForm.goodsImg?s("div",{staticClass:"thumbnail"},[s("div",{staticClass:"img-wrap"},[s("img",{attrs:{src:"http://upload.ixn123.com/"+e.ruleForm.goodsImg}})])]):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"商品描述",prop:"goodsDetail"}},[s("el-col",{attrs:{span:11}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.goodsDetail,callback:function(t){e.$set(e.ruleForm,"goodsDetail",t)},expression:"ruleForm.goodsDetail"}})],1)],1)],1),e._v(" "),s("div",{staticClass:"ui-box"},[s("p",{staticClass:"create-main"},[e._v("库存/规格")]),e._v(" "),s("el-form-item",{attrs:{label:"市场价",prop:"market"}},[s("el-col",{attrs:{span:5}},[s("el-input",{model:{value:e.ruleForm.market,callback:function(t){e.$set(e.ruleForm,"market",e._n(t))},expression:"ruleForm.market"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"本店价",prop:"localShop"}},[s("el-col",{attrs:{span:5}},[s("el-input",{model:{value:e.ruleForm.localShop,callback:function(t){e.$set(e.ruleForm,"localShop",e._n(t))},expression:"ruleForm.localShop"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"库存",prop:"stock"}},[s("el-col",{attrs:{span:5}},[s("el-input",{model:{value:e.ruleForm.stock,callback:function(t){e.$set(e.ruleForm,"stock",e._n(t))},expression:"ruleForm.stock"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"商品编码",prop:"goodsCode"}},[s("el-col",{attrs:{span:5}},[s("el-input",{model:{value:e.ruleForm.goodsCode,callback:function(t){e.$set(e.ruleForm,"goodsCode",t)},expression:"ruleForm.goodsCode"}})],1)],1)],1)]),e._v(" "),s("div",{staticClass:"ui-box tobasic"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.Edit()}}},[e._v("保存修改")])],1),e._v(" "),s("el-dialog",{attrs:{title:"选择图片",visible:e.hideUploadImg},on:{"update:visible":function(t){e.hideUploadImg=t}}},[s("el-upload",{ref:"newupload",attrs:{action:"http://api.xn.demo-xn.itdongli.com/attachment/upload/uploadimage","before-remove":e.beforeRemove,"list-type":"picture-card",multiple:"",accept:".jpg,.gif,.png",limit:1,data:e.upLoadData,onSuccess:e.uploadSuccess,"on-exceed":e.handleExceed}},[s("i",{staticClass:"el-icon-plus"}),e._v(" "),s("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/gif/png文件，且不超过500kb")])]),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.hideUploadImg=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.hideUploadImg=!1}}},[e._v("确 定")])],1)],1)],1):e._e()])},staticRenderFns:[]};var r=s("C7Lr")(l,i,!1,function(e){s("6iF2")},"data-v-4c835eac",null);t.default=r.exports}});
//# sourceMappingURL=36.fe58722fc743cc687452.js.map